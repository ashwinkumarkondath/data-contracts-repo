kind: DataContract
template_version: 0.0.2
dataset: email_events
data_source: my_bigquery_connection2
name: Email_events - customer_orders
status: verified
description: Views built on top of the seller tables.
assets:
- default/bigquery/1751545061/sturdy-tuner-464808-c6/sales_demo/email_events
assetQualifiedName: default/bigquery/1751545061/sturdy-tuner-464808-c6/sales_demo/email_events
type: table
expectations:
  schema:
  - column: eventid
    type: string
    required: true
  - column: customerid
    type: string
  - column: event_type
    type: string
  - column: event_date
    type: date
  - column: email_subject
    type: string
    
  quality:
  - name: unique_eventid
    type: unique
    description: Event ID must be unique
    dimension: completeness
    query: 'SELECT COUNT(*) FROM ${object} WHERE ${property} IS NOT NULL'
    mustBeGreaterThan: 0
    mustBeLessThan: 3600
    severity: block
    column: eventid
    
  - name: not_null_customerid
    type: not_null
    description: Every order must have a customer ID
    dimension: completeness
    query: 'SELECT COUNT(*) FROM ${object} WHERE ${property} IS NOT NULL'
    mustBeGreaterThan: 0
    mustBeLessThan: 3600
    severity: block
    column: customerid
    
  - name: valid_event_type
    type: valid_type
    description: Event type must be valid
    dimension: completeness
    query: 'SELECT COUNT(*) FROM ${object} WHERE ${property} IS NOT NULL'
    mustBeGreaterThan: 0
    mustBeLessThan: 3600
    severity: block
    column: event_type
    
  - name: valid_event_date
    type: valid_date
    description: Event date must be valid
    dimension: completeness
    query: 'SELECT COUNT(*) FROM ${object} WHERE ${property} IS NOT NULL'
    mustBeGreaterThan: 0
    mustBeLessThan: 3600
    severity: block
    column: event_date
    
  - name: valid_email_subject
    type: short
    description: Email Subject must be valid and short
    dimension: completeness
    query: 'SELECT COUNT(*) FROM ${object} WHERE ${property} IS NOT NULL'
    mustBeGreaterThan: 0
    mustBeLessThan: 3600
    severity: block
    column: email_subject
    
  table_rule:
  - name: rowCount
    type: sql
    description: Ensure row count is within expected volume range
    dimension: completeness
    query: 'SELECT COUNT(*) FROM ${object}'
    mustBeGreaterThan: 10
    mustBeLessThan: 10000
    severity: alert
sla:
- freshness:
    property: latency
- freshness:
    property: generalAvailability
